<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Key Idea â€¢ DeclareDesign</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script><script src="../pkgdown.js"></script><!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-vignette">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../index.html">DeclareDesign</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/key_idea.html">Key Idea</a>
</li>
<li>
  <a href="../articles/design_library.html">Design Library</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Using DeclareDesign
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/DeclareDesign.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/custom_functions.html">Custom functions</a>
    </li>
    <li>
      <a href="../articles/advanced_features.html">Advanced features</a>
    </li>
    <li>
      <a href="../articles/companion_packages.html">Companion packages</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="http://declaredesign.org">DeclareDesign</a>
    </li>
    <li>
      <a href="http://randomizr.declaredesign.org">randomizr</a>
    </li>
    <li>
      <a href="http://fabricatr.declaredesign.org">fabricatr</a>
    </li>
    <li>
      <a href="http://estimatr.declaredesign.org">estimatr</a>
    </li>
  </ul>
</li>
<li>
  <a href="http://discuss.declaredesign.org">Discussion Board</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/DeclareDesign/DeclareDesign">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9">
    <div class="page-header toc-ignore">
      <h1>Key Idea</h1>
            
          </div>

    
    
<div class="contents">
<p>The key idea motivating <strong>DeclareDesign</strong> is that the core analytic features of research designs can be declared in a complete manner and saved as an object. A properly declared design can then easily be shared, modified, improved, and used. The design contains the information needed to implement key parts of data generation and to implement analysis. It also contains enough information to allow researchers or third parties to query it to see whether it can deliver on its promises.</p>
<div id="a-simple-design-declaration" class="section level2">
<h2 class="hasAnchor">
<a href="#a-simple-design-declaration" class="anchor"></a>A simple design declaration</h2>
<p>Here is an illustration using a very simple two arm trial.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># M -- Model: Speculation on variables and relations between them</span>
population &lt;-<span class="st"> </span><span class="kw"><a href="../reference/declare_population.html">declare_population</a></span>(<span class="dt">N =</span> <span class="dv">100</span>, <span class="dt">u =</span> <span class="kw">rnorm</span>(N))
potential_outcomes &lt;-<span class="st"> </span><span class="kw"><a href="../reference/declare_potential_outcomes.html">declare_potential_outcomes</a></span>(<span class="dt">Y_Z_0 =</span> u, 
                                                 <span class="dt">Y_Z_1 =</span> <span class="dv">1</span> <span class="op">-</span><span class="st"> </span>u)

<span class="co"># I -- Inquiry: A query defined in terms of potential outcomes</span>
estimand &lt;-<span class="st"> </span><span class="kw"><a href="../reference/declare_estimand.html">declare_estimand</a></span>(<span class="dt">ATE =</span> <span class="kw">mean</span>(Y_Z_<span class="dv">1</span> <span class="op">-</span><span class="st"> </span>Y_Z_<span class="dv">0</span>))

<span class="co"># D -- Data Strategy: Researcher interventions on the world</span>
assignment &lt;-<span class="st"> </span><span class="kw"><a href="../reference/declare_assignment.html">declare_assignment</a></span>(<span class="dt">m =</span> <span class="dv">50</span>) 

<span class="co"># A -- Answer Strategy: Conclusiosn to be drawn from data</span>
estimator &lt;-<span class="st"> </span><span class="kw"><a href="../reference/declare_estimator.html">declare_estimator</a></span>(Y <span class="op">~</span><span class="st"> </span>Z, <span class="dt">estimand =</span> estimand)

<span class="co"># Design: Putting it all together</span>
design &lt;-<span class="st"> </span><span class="kw"><a href="../reference/declare_design.html">declare_design</a></span>(population, 
                         potential_outcomes, 
                         estimand, 
                         assignment, 
                         reveal_outcomes, 
                         estimator,
                         <span class="dt">description =</span> <span class="st">"A very simple design"</span>)</code></pre></div>
</div>
<div id="making-use-of-a-design" class="section level2">
<h2 class="hasAnchor">
<a href="#making-use-of-a-design" class="anchor"></a>Making Use of A Design</h2>
<p>Use the design object to simulate data, including treatment assignments:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data &lt;-<span class="st"> </span><span class="kw"><a href="../reference/post_design.html">draw_data</a></span>(design)</code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">ID</th>
<th align="right">u</th>
<th align="right">Y_Z_0</th>
<th align="right">Y_Z_1</th>
<th align="right">Z</th>
<th align="right">Z_cond_prob</th>
<th align="right">Y</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">001</td>
<td align="right">1.53</td>
<td align="right">1.53</td>
<td align="right">-0.53</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">-0.53</td>
</tr>
<tr class="even">
<td align="left">002</td>
<td align="right">0.96</td>
<td align="right">0.96</td>
<td align="right">0.04</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">0.04</td>
</tr>
<tr class="odd">
<td align="left">003</td>
<td align="right">0.05</td>
<td align="right">0.05</td>
<td align="right">0.95</td>
<td align="right">0</td>
<td align="right">0.5</td>
<td align="right">0.05</td>
</tr>
<tr class="even">
<td align="left">004</td>
<td align="right">-1.10</td>
<td align="right">-1.10</td>
<td align="right">2.10</td>
<td align="right">0</td>
<td align="right">0.5</td>
<td align="right">-1.10</td>
</tr>
<tr class="odd">
<td align="left">005</td>
<td align="right">0.54</td>
<td align="right">0.54</td>
<td align="right">0.46</td>
<td align="right">0</td>
<td align="right">0.5</td>
<td align="right">0.54</td>
</tr>
<tr class="even">
<td align="left">006</td>
<td align="right">0.58</td>
<td align="right">0.58</td>
<td align="right">0.42</td>
<td align="right">1</td>
<td align="right">0.5</td>
<td align="right">0.42</td>
</tr>
</tbody>
</table>
<p>Use the design object to implement analysis:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">estimates &lt;-<span class="st"> </span><span class="kw"><a href="../reference/post_design.html">get_estimates</a></span>(design)</code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">estimator_label</th>
<th align="left">coefficient_name</th>
<th align="right">est</th>
<th align="right">se</th>
<th align="right">p</th>
<th align="right">ci_lower</th>
<th align="right">ci_upper</th>
<th align="left">estimand_label</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">my_estimator</td>
<td align="left">Z</td>
<td align="right">1.2</td>
<td align="right">0.22</td>
<td align="right">0</td>
<td align="right">0.77</td>
<td align="right">1.6</td>
<td align="left">ATE</td>
</tr></tbody>
</table>
</div>
<div id="diagnosing-a-design" class="section level2">
<h2 class="hasAnchor">
<a href="#diagnosing-a-design" class="anchor"></a>Diagnosing a design</h2>
<p>The fully declared design contains the information needed to diagnose it.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">diagnosis &lt;-<span class="st"> </span><span class="kw"><a href="../reference/diagnose_design.html">diagnose_design</a></span>(design, <span class="dt">sims =</span> <span class="dv">10000</span>, <span class="dt">bootstrap_sims =</span> <span class="dv">500</span>)</code></pre></div>
<table class="table">
<thead><tr class="header">
<th></th>
<th align="left">Estimand Label</th>
<th align="left">Estimate Label</th>
<th align="right">Bias</th>
<th align="right">RMSE</th>
<th align="right">Power</th>
<th align="right">Coverage</th>
<th align="right">Mean Estimand</th>
<th align="right">Mean Estimate</th>
<th align="right">SD Estimate</th>
<th align="right">Type S-Rate</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Estimated Diagnosand</td>
<td align="left">ATE</td>
<td align="left">my_estimator</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0.2</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td>Boostrapped SE</td>
<td align="left"></td>
<td align="left"></td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0</td>
<td align="right">0.0</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>The diagnosis here confirms the fact that random assignment to treatment allows for unbiased estimates of treatment effects. More surprisingly perhaps, the diagnosis reveals that the statistical inferences are wrong: the 95% confidence intervals do not have 95% coverage, reflecting the fact that Neyman standard errors are overly conservative. Note that the same problem would arise with the standard errors from a regression using <code>lm</code>, for example.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#a-simple-design-declaration">A simple design declaration</a></li>
      <li><a href="#making-use-of-a-design">Making Use of A Design</a></li>
      <li><a href="#diagnosing-a-design">Diagnosing a design</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright" style="flex:3;">
  <p>Developed by Graeme Blair, Jasper Cooper, Alexander Coppock, Macartan Humphreys.</p>
  <p>Code is licensed under <a href="https://opensource.org/licenses/mit-license.php">MIT</a> license.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  </body>
</html>
