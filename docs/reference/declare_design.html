<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>DeclareDesign - Declare Design â€” declare_design</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../">DeclareDesign</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/idea.html">The Idea</a>
</li>
<li>
  <a href="../articles/design_library.html">Design Library</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Using DeclareDesign
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/DeclareDesign.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/custom_functions.html">Custom functions</a>
    </li>
    <li>
      <a href="../articles/advanced_features.html">Advanced features</a>
    </li>
    <li>
      <a href="../articles/companion_packages.html">Companion packages</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="http://discuss.declaredesign.org">Ask for Help</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="http://declaredesign.org">DeclareDesign</a>
    </li>
    <li>
      <a href="http://randomizr.declaredesign.org">randomizr</a>
    </li>
    <li>
      <a href="http://fabricatr.declaredesign.org">fabricatr</a>
    </li>
    <li>
      <a href="http://estimatr.declaredesign.org">estimatr</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a></a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Declare Design</h1>
    </div>

    
    <p>Declare Design</p>
    

    <pre class="usage"><span class='fu'>declare_design</span>(<span class='no'>...</span>, <span class='kw'>title</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>authors</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>description</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>citation</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>A set of steps in a research design, beginning with a <code>data.frame</code> representing the population or a function that draws the population. Steps are evaluated sequentially. With the exception of the first step, all steps must be functions that take a <code>data.frame</code> as an argument and return a <code>data.frame</code>. Typically, many steps are declared using the <code>declare_</code> functions, i.e., <code><a href='declare_population.html'>declare_population</a></code>, <code><a href='declare_population.html'>declare_population</a></code>, <code><a href='declare_sampling.html'>declare_sampling</a></code>, <code><a href='declare_potential_outcomes.html'>declare_potential_outcomes</a></code>, <code><a href='declare_estimand.html'>declare_estimand</a></code>, <code><a href='declare_assignment.html'>declare_assignment</a></code>, and <code><a href='declare_estimator.html'>declare_estimator</a></code>. Functions from the <code>dplyr</code> package such as mutate can also be usefully included.</p></td>
    </tr>
    <tr>
      <th>title</th>
      <td><p>(optional) The title of the study, as a character string.</p></td>
    </tr>
    <tr>
      <th>authors</th>
      <td><p>(optional) The authors of the study, as a character string.</p></td>
    </tr>
    <tr>
      <th>description</th>
      <td><p>(optional) A description of the design in words, as a character string, stored alongside the declaration in code.</p></td>
    </tr>
    <tr>
      <th>citation</th>
      <td><p>(optional) The preferred citation for the design, as a character string. Either include the full citation in text, or paste a BibTeX entry. If title and authors are specified and you leave citation empty, a BibTeX entry will be created automatically.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a list of two functions, the <code>design_function</code> and the <code>data_function</code>. The <code>design_function</code> runs the design once, i.e. draws the data and calculates any estimates and estimands defined in <code>...</code>, returned separately as two <code>data.frame</code>'s. The <code>data_function</code> runs the design once also, but only returns the final data.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Users can supply three kinds of functions to declare_design:</p>
<p>1. Data generating functions. These include population, assignment, and sampling functions.</p>
<p>2. Estimand functions.</p>
<p>3. Estimator functions.</p>
<p>The location of the estimand and estimator functions in the chain of functions determine *when* the values of the estimand and estimator are calculated. This allows users to, for example, differentiate between a population average treatment effect and a sample average treatment effect by placing the estimand function before or after sampling.</p>
<p>Designs declared with declare_design can be investigated with a series of post-declaration commands, such as <code><a href='post_design.html'>draw_data</a></code>, <code><a href='post_design.html'>get_estimands</a></code>, <code><a href='post_design.html'>get_estimates</a></code>, and <code><a href='diagnose_design.html'>diagnose_design</a></code>.</p>
<p>The print and summary methods for a design object return some helpful descriptions of the steps in your research design. If randomizr functions are used for any assignment or sampling steps, additional details about those steps are provided.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='no'>my_population</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='declare_population.html'>declare_population</a></span>(<span class='kw'>N</span> <span class='kw'>=</span> <span class='fl'>500</span>, <span class='kw'>noise</span> <span class='kw'>=</span> <span class='fu'>rnorm</span>(<span class='no'>N</span>))

<span class='no'>my_potential_outcomes</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='declare_potential_outcomes.html'>declare_potential_outcomes</a></span>(
  <span class='kw'>Y_Z_0</span> <span class='kw'>=</span> <span class='no'>noise</span>, <span class='kw'>Y_Z_1</span> <span class='kw'>=</span> <span class='no'>noise</span> +
  <span class='fu'>rnorm</span>(<span class='no'>N</span>, <span class='kw'>mean</span> <span class='kw'>=</span> <span class='fl'>2</span>, <span class='kw'>sd</span> <span class='kw'>=</span> <span class='fl'>2</span>))

<span class='no'>my_sampling</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='declare_sampling.html'>declare_sampling</a></span>(<span class='kw'>n</span> <span class='kw'>=</span> <span class='fl'>250</span>)

<span class='no'>my_assignment</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='declare_assignment.html'>declare_assignment</a></span>(<span class='kw'>m</span> <span class='kw'>=</span> <span class='fl'>25</span>)

<span class='no'>my_estimand</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='declare_estimand.html'>declare_estimand</a></span>(<span class='kw'>ATE</span> <span class='kw'>=</span> <span class='fu'>mean</span>(<span class='no'>Y_Z_1</span> - <span class='no'>Y_Z_0</span>))

<span class='no'>my_estimator</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='declare_estimator.html'>declare_estimator</a></span>(<span class='no'>Y</span> ~ <span class='no'>Z</span>, <span class='kw'>estimand</span> <span class='kw'>=</span> <span class='no'>my_estimand</span>)

<span class='no'>design</span> <span class='kw'>&lt;-</span> <span class='fu'>declare_design</span>(<span class='no'>my_population</span>,
                         <span class='no'>my_potential_outcomes</span>,
                         <span class='no'>my_sampling</span>,
                         <span class='no'>my_estimand</span>,
                         <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='http://dplyr.tidyverse.org/reference/mutate.html'>mutate</a></span>(<span class='kw'>noise_sq</span> <span class='kw'>=</span> <span class='no'>noise</span>^<span class='fl'>2</span>),
                         <span class='no'>my_assignment</span>,
                         <span class='no'>reveal_outcomes</span>,
                         <span class='no'>my_estimator</span>)

<span class='no'>design</span></div><div class='output co'>#&gt; 
#&gt; Design Summary
#&gt; 
#&gt; Step 1 (population): my_population ---------------------------------------------
#&gt; 
#&gt; N = 500 
#&gt; 
#&gt; Added variable: ID 
#&gt;  N_missing N_unique
#&gt;          0      500
#&gt; 
#&gt; Added variable: noise 
#&gt;    min median mean  max   sd N_missing N_unique
#&gt;  -2.42  -0.02 0.03 2.84 0.95         0      500
#&gt; 
#&gt; Step 2 (potential outcomes): my_potential_outcomes -----------------------------
#&gt; 
#&gt; Added variable: Y_Z_0 
#&gt;    min median mean  max   sd N_missing N_unique
#&gt;  -2.42  -0.02 0.03 2.84 0.95         0      500
#&gt; 
#&gt; Added variable: Y_Z_1 
#&gt;    min median mean  max   sd N_missing N_unique
#&gt;  -5.51   2.08 2.05 9.77 2.19         0      500
#&gt; 
#&gt; Step 3 (sampling): my_sampling -------------------------------------------------
#&gt; 
#&gt; N = 250 (250 subtracted) 
#&gt; 
#&gt; Added variable: S_inclusion_prob 
#&gt;              0.5
#&gt;   Frequency  250
#&gt;  Proportion 1.00
#&gt; 
#&gt; Altered variable: ID 
#&gt;   Before: 
#&gt;  N_missing N_unique
#&gt;          0      500
#&gt; 
#&gt;   After:
#&gt;  N_missing N_unique
#&gt;          0      250
#&gt; 
#&gt; Altered variable: noise 
#&gt;   Before: 
#&gt;    min median mean  max   sd N_missing N_unique
#&gt;  -2.42  -0.02 0.03 2.84 0.95         0      500
#&gt; 
#&gt;   After:
#&gt;    min median mean  max   sd N_missing N_unique
#&gt;  -2.27   0.09 0.14 2.84 0.94         0      250
#&gt; 
#&gt; Altered variable: Y_Z_0 
#&gt;   Before: 
#&gt;    min median mean  max   sd N_missing N_unique
#&gt;  -2.42  -0.02 0.03 2.84 0.95         0      500
#&gt; 
#&gt;   After:
#&gt;    min median mean  max   sd N_missing N_unique
#&gt;  -2.27   0.09 0.14 2.84 0.94         0      250
#&gt; 
#&gt; Altered variable: Y_Z_1 
#&gt;   Before: 
#&gt;    min median mean  max   sd N_missing N_unique
#&gt;  -5.51   2.08 2.05 9.77 2.19         0      500
#&gt; 
#&gt;   After:
#&gt;    min median mean  max   sd N_missing N_unique
#&gt;  -4.10   2.03 2.13 8.85 2.21         0      250
#&gt; 
#&gt; Step 4 (estimand): my_estimand -------------------------------------------------
#&gt; 
#&gt; A single draw of the estimand:
#&gt;  estimand_label estimand
#&gt;             ATE        2
#&gt; 
#&gt; Step 5 (declare step): dplyr::mutate(noise_sq = noise^2) -----------------------
#&gt; 
#&gt; Added variable: noise_sq 
#&gt;   min median mean  max   sd N_missing N_unique
#&gt;  0.00   0.42 0.90 8.06 1.26         0      250
#&gt; 
#&gt; Step 6 (assignment): my_assignment ---------------------------------------------
#&gt; 
#&gt; Added variable: Z 
#&gt;                0    1
#&gt;   Frequency  225   25
#&gt;  Proportion 0.90 0.10
#&gt; 
#&gt; Added variable: Z_cond_prob 
#&gt;              0.1  0.9
#&gt;   Frequency   25  225
#&gt;  Proportion 0.10 0.90
#&gt; 
#&gt; Step 7 (reveal outcomes): reveal_outcomes --------------------------------------
#&gt; 
#&gt; Added variable: Y 
#&gt;    min median mean  max   sd N_missing N_unique
#&gt;  -4.10   0.10 0.32 6.68 1.36         0      250
#&gt; 
#&gt; Step 8 (estimator): my_estimator -----------------------------------------------
#&gt; 
#&gt; Formula: Y ~ Z 
#&gt; 
#&gt; A single draw of the estimator:
#&gt;  estimator_label coefficient_name est   se       p ci_lower ci_upper
#&gt;     my_estimator                Z 2.1 0.53 0.00074     0.95      3.1
#&gt;  estimand_label
#&gt;             ATE
#&gt; </div><div class='input'>
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='post_design.html'>draw_data</a></span>(<span class='no'>design</span>)

<span class='no'>estimates</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='post_design.html'>get_estimates</a></span>(<span class='no'>design</span>)
<span class='no'>estimands</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='post_design.html'>get_estimands</a></span>(<span class='no'>design</span>)</div><span class='co'># NOT RUN {</span>
<span class='no'>diagnosis</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='diagnose_design.html'>diagnose_design</a></span>(<span class='no'>design</span>)

<span class='fu'>summary</span>(<span class='no'>diagnosis</span>)
<span class='co'># }</span><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright" style="flex:3;">
  <p>Developed by Graeme Blair, Jasper Cooper, Alexander Coppock, Macartan Humphreys.</p>
  <p>Code is licensed under <a href="https://opensource.org/licenses/mit-license.php">MIT</a> license.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
