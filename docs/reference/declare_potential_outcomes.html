<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>DeclareDesign - Potential Outcomes â€” declare_potential_outcomes</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  
  
<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../">DeclareDesign</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/idea.html">The Idea</a>
</li>
<li>
  <a href="../articles/design_library.html">Design Library</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Using DeclareDesign
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/DeclareDesign.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/custom_functions.html">Custom functions</a>
    </li>
    <li>
      <a href="../articles/advanced_features.html">Advanced features</a>
    </li>
    <li>
      <a href="../articles/companion_packages.html">Companion packages</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="http://discuss.declaredesign.org">Ask for Help</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="http://declaredesign.org">DeclareDesign</a>
    </li>
    <li>
      <a href="http://randomizr.declaredesign.org">randomizr</a>
    </li>
    <li>
      <a href="http://fabricatr.declaredesign.org">fabricatr</a>
    </li>
    <li>
      <a href="http://estimatr.declaredesign.org">estimatr</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a></a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

      <div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Potential Outcomes</h1>
    </div>

    
    <p>Potential Outcomes</p>
    

    <pre class="usage"><span class='fu'>declare_potential_outcomes</span>(<span class='no'>...</span>, <span class='kw'>handler</span> <span class='kw'>=</span> <span class='no'>potential_outcomes_function_default</span>,
  <span class='kw'>label</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>potential_outcomes.formula</span>(<span class='no'>formula</span>, <span class='no'>data</span>, <span class='kw'>condition_names</span> <span class='kw'>=</span> <span class='fu'>c</span>(<span class='fl'>0</span>, <span class='fl'>1</span>),
  <span class='kw'>assignment_variable_name</span> <span class='kw'>=</span> <span class='st'>"Z"</span>, <span class='kw'>level</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)

<span class='fu'>potential_outcomes.default</span>(<span class='kw'>formula</span> <span class='kw'>=</span> <span class='fu'>stop</span>(<span class='st'>"Not provided"</span>), <span class='no'>...</span>, <span class='no'>data</span>,
  <span class='kw'>level</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a> Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>Arguments to the potential_outcomes_function</p></td>
    </tr>
    <tr>
      <th>handler</th>
      <td><p>A function that accepts a data.frame as an argument and returns a data.frame with potential outcomes columns appended. See the examples for the behavior of the default function.</p></td>
    </tr>
    <tr>
      <th>label</th>
      <td><p>A step label</p></td>
    </tr>
    <tr>
      <th>formula</th>
      <td><p>a formula to calculate Potential outcomes as functions of assignment variables</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>a data.frame</p></td>
    </tr>
    <tr>
      <th>condition_names</th>
      <td><p>vector specifying the values the assignment variable can realize</p></td>
    </tr>
    <tr>
      <th>assignment_variable_name</th>
      <td><p>The name of the assignment variable</p></td>
    </tr>
    <tr>
      <th>level</th>
      <td><p>a character specifying a level of hierarchy for fabricate to calculate at</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a function that returns a data.frame</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>A `declare_potential_outcomes` declaration returns a function. That function takes data and returns data with potential outcomes columns appended. These columns describe the outcomes that each unit would express if that unit were in the corresponding treatment condition.</p>
<p>The potential outcomes function can sometimes be a stumbling block for users, as some are uncomfortable asserting anything in particular about the very causal process that they are conducting a study to learn about! We recommend trying to imagine what your preferred theory would predict, what an alternative theory would predict, and what your study would reveal if there were no differences in potential outcomes for any unit (i.e., all treatment effects are zero).</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>my_population</span> <span class='kw'>&lt;-</span>
<span class='fu'><a href='declare_population.html'>declare_population</a></span>(<span class='kw'>N</span> <span class='kw'>=</span> <span class='fl'>1000</span>,
                   <span class='kw'>income</span> <span class='kw'>=</span> <span class='fu'>rnorm</span>(<span class='no'>N</span>),
                   <span class='kw'>age</span> <span class='kw'>=</span> <span class='fu'>sample</span>(<span class='fl'>18</span>:<span class='fl'>95</span>, <span class='no'>N</span>, <span class='kw'>replace</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>))
<span class='no'>pop</span> <span class='kw'>&lt;-</span> <span class='fu'>my_population</span>()

<span class='co'># By default, there are two ways of declaring potential outcomes:</span>
<span class='co'># as separate variables or using a formula:</span>

<span class='co'># As separate variables</span>

<span class='no'>my_potential_outcomes</span> <span class='kw'>&lt;-</span>
     <span class='fu'>declare_potential_outcomes</span>(
        <span class='kw'>Y_Z_0</span> <span class='kw'>=</span> <span class='fl'>.05</span>,
        <span class='kw'>Y_Z_1</span> <span class='kw'>=</span> <span class='fl'>.30</span> + <span class='fl'>.01</span> * <span class='no'>age</span>)

<span class='fu'>head</span>(<span class='fu'>my_potential_outcomes</span>(<span class='no'>pop</span>))</div><div class='output co'>#&gt;     ID     income age Y_Z_0 Y_Z_1
#&gt; 1 0001 -0.4349032  30  0.05  0.60
#&gt; 2 0002  0.4989009  85  0.05  1.15
#&gt; 3 0003  1.1979224  65  0.05  0.95
#&gt; 4 0004 -0.1707637  71  0.05  1.01
#&gt; 5 0005  0.5745204  40  0.05  0.70
#&gt; 6 0006 -0.5342050  44  0.05  0.74</div><div class='input'>
<span class='co'># Using a formula</span>
 <span class='no'>my_potential_outcomes</span> <span class='kw'>&lt;-</span> <span class='fu'>declare_potential_outcomes</span>(
 <span class='kw'>formula</span> <span class='kw'>=</span> <span class='no'>Y</span> ~ <span class='fl'>.25</span> * <span class='no'>Z</span> + <span class='fl'>.01</span> * <span class='no'>age</span> * <span class='no'>Z</span>)
 <span class='no'>pop_pos</span> <span class='kw'>&lt;-</span> <span class='fu'>my_potential_outcomes</span>(<span class='no'>pop</span>)
 <span class='fu'>head</span>(<span class='no'>pop_pos</span>)</div><div class='output co'>#&gt;     ID     income age Y_Z_0 Y_Z_1
#&gt; 1 0001 -0.4349032  30     0  0.55
#&gt; 2 0002  0.4989009  85     0  1.10
#&gt; 3 0003  1.1979224  65     0  0.90
#&gt; 4 0004 -0.1707637  71     0  0.96
#&gt; 5 0005  0.5745204  40     0  0.65
#&gt; 6 0006 -0.5342050  44     0  0.69</div><div class='input'>
 <span class='co'># condition_names defines the "range" of the potential outcomes function</span>
 <span class='no'>my_potential_outcomes</span> <span class='kw'>&lt;-</span>
      <span class='fu'>declare_potential_outcomes</span>(
      <span class='kw'>formula</span> <span class='kw'>=</span> <span class='no'>Y</span> ~ <span class='fl'>.25</span> * <span class='no'>Z</span> + <span class='fl'>.01</span> * <span class='no'>age</span> * <span class='no'>Z</span>,
      <span class='kw'>condition_names</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>4</span>)

<span class='fu'>head</span>(<span class='fu'>my_potential_outcomes</span>(<span class='no'>pop</span>))</div><div class='output co'>#&gt;     ID     income age Y_Z_1 Y_Z_2 Y_Z_3 Y_Z_4
#&gt; 1 0001 -0.4349032  30  0.55  1.10  1.65  2.20
#&gt; 2 0002  0.4989009  85  1.10  2.20  3.30  4.40
#&gt; 3 0003  1.1979224  65  0.90  1.80  2.70  3.60
#&gt; 4 0004 -0.1707637  71  0.96  1.92  2.88  3.84
#&gt; 5 0005  0.5745204  40  0.65  1.30  1.95  2.60
#&gt; 6 0006 -0.5342050  44  0.69  1.38  2.07  2.76</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright" style="flex:3;">
  <p>Developed by Graeme Blair, Jasper Cooper, Alexander Coppock, Macartan Humphreys, Neal Fultz.</p>
  <p>Code is licensed under <a href="https://opensource.org/licenses/mit-license.php">MIT</a> license.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://hadley.github.io/pkgdown/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  </body>
</html>
